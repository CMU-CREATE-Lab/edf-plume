<!DOCTYPE html>
<html>
  <head>
    <title>Air Tracker</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" />
    <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.14.1/themes/smoothness/jquery-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/controls.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/widgets.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/TimelineHeatmap.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/materialUI.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap-fullscreen-select.min.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/introjs.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css">

    <script>
      var IS_LOCAL = ["localhost", "file:", "192.168"].some(str => window.location.href.includes(str));
      <!-- NOTE: Edit this to define location of /assets/  Ensure trailing slash. -->
      var ASSETS_ROOT = IS_LOCAL ? "./assets/" : "https://airtracker.createlab.org/assets/";
    </script>

    <script type="text/javascript" src="https://storage.googleapis.com/air-tracker-edf-website/prod/assets/data/lang/langs.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=default"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6eawl6aLg9CHsJGc86qKcORA3vTcDZUQ&loading=async&callback=initMap&libraries=geometry,places&v=weekly"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.45/moment-timezone-with-data-10-year-range.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.14.1/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script type="text/javascript" src="./assets/js/TimelineHeatmap.js"></script>
    <script type="text/javascript" src="./assets/js/widgets.js"></script>
    <script type="text/javascript" src="./assets/js/Util.js"></script>
    <script type="text/javascript" src="./assets/js/customTimeline2.js"></script>
    <script type="text/javascript" src="./assets/js/index.js"></script>
    <script type="text/javascript" src="./assets/js/plots.js"></script>
    <script type="text/javascript" src="./assets/js/heatmaps.js"></script>
    <script type="text/javascript" src="./assets/js/timeline.js"></script>
    <script type="text/javascript" src="./assets/js/purpleAirTourHelpers.js"></script>
    <script type="text/javascript" src="./assets/lib/gmaps-utils/map_marker/CustomMapMarker.js"></script>
    <script type="text/javascript" src="./assets/lib/touchPunch/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="./assets/lib/bootstrapFullscreenSelect/bootstrap-fullscreen-select.min.js"></script>
    <script type="text/javascript" src="./assets/lib/scrollIntoView/scrollIntoView.min.js"></script>
    <script type="text/javascript" src="./assets/lib/html2canvas/html2canvas.min.js"></script>
    <script type="text/javascript" src="./assets/lib/downloadjs/download.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@googlemaps/markerwithlabel@2.0.28/dist/index.min.js"></script>
    <script type="text/javascript" src="./assets/lib/introjs/intro.min.js"></script>

    <script type="text/javascript" src="./assets/lib/grapher/grapher.min.js"></script>
    <script type="text/javascript" src="./assets/lib/grapher/PlotManager.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.8/handlebars.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/luxon/3.5.0/luxon.min.js"></script>

    <script type="text/javascript" src="./assets/lib/rrule/rrule.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"></script>

    <script type="text/template" id="sensors-tpl">
      {{#each .}}
        <tr id="{{id}}-legend-row" class="legend-row">
          <td class="entry-title two-rows">
            {{name}} <span class="pollutant-name"></span>:
            <br><span class="legend-row-units">(ug/m<sup>3</sup>)</span><span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-{{id}}" data-lang-key="infobar.moreInfo.title"></span>
          </td>
          <td colspan="2">
            <table>
              <tr>
                <td class="color-td PM-color-square-1"></td>
                <td class="color-td PM-color-square-2"></td>
                <td class="color-td PM-color-square-3"></td>
                <td class="color-td PM-color-square-4"></td>
                <td class="color-td PM-color-square-5"></td>
              </tr>
              <tr class='pollution-scale-vals'>
                <td class="legend-label"></td>
                <td class="legend-label"></td>
                <td class="legend-label"></td>
                <td class="legend-label"></td>
                <td class="legend-label"></td>
              </tr>
            </table>
          </td>
          <td>
            <label class="switch" title="{{title}}" data-lang-key="legend.toggle.title">
              <input type="checkbox" id="toggle-{{id}}" data-marker-type="{{id}}">
              <span class="slider round">
                <span class="input-state-text"></span>
              </span>
            </label>
          </td>
        </tr>
      {{/each}}
    </script>
    <script type="text/template" id="language-picker-tpl">
      <form action="" class="language-picker__form">
        <select name="language-picker-select" id="language-picker-select">
          {{#each .}}
            <option lang="{{@key}}" value="{{@key}}" selected>{{this}}</option>
          {{/each}}
        </select>
      </form>
    </script>
    <script type="text/template" id="aq-std-picker-tpl">
      <select name="aq-std-picker-select" id="aq-std-picker-select">
        {{#each .}}
          <option value="{{@key}}" selected>{{name}}</option>
        {{/each}}
      </select>
    </script>
    <script type="text/template" id="body-tpl">
      <div id="heatmap-loading-mask"><div class="loader"></div></div>
      <div id="controls" class="playbackTimelineOff" style="display: none">
        <div id="playback-timeline-container" class="noselect materialUI">
          <div class="materialTimelineContainerMain">
            <div class="materialTimelineContainer">
              <div class="timestampPreview disabled" title="{{playbackTimelineContainer.timestampPreview.title}}" data-lang-key="playbackTimelineContainer.timestampPreview.title"><div id="currentTime"></div></div>
              <div class="playbackButton" title="{{playbackTimelineContainer.playbackButton.title}}" data-lang-key="playbackTimelineContainer.playbackButton.title"></div>
              <div class="leftSeekControl" title="{{playbackTimelineContainer.leftSeekControl.title}}" data-lang-key="playbackTimelineContainer.leftSeekControl.title"><span class="leftSeekControlIcon"></span></div>
              <div class="materialTimeline"></div>
              <div class="rightSeekControl" title="{{playbackTimelineContainer.rightSeekControl.title}}" data-lang-key="playbackTimelineContainer.rightSeekControl.title"><span class="rightSeekControlIcon"></span></div>
            </div>
          </div>
          <div id="timeJumpControl" title="{{playbackTimelineContainer.timeJumpControl.title}}" data-lang-key="playbackTimelineContainer.timeJumpControl.title"></div>
        </div>
        <div id="timeline-container" class="noselect timeline-container"></div>
        <div id="timeline-handle" class="noselect force-no-visibility"><span><span id='selected_year'></span>&nbsp;<span data-lang-key="playbackTimelineContainer.dayPickerHeader.content">{{{playbackTimelineContainer.dayPickerHeader.content}}}</span>&nbsp;-&nbsp;</span><span id='city_name'></span></div>
        <button id="calendar-btn" title="{{calendar.titleBar.title}}" data-lang-key="calendar.titleBar.title" class="force-hidden custom-button-flat calendar-default-icon" disabled>
          <div class="calendar-specific-day hidden"></div>
        </button>
      </div>
      <div id="infobar" class='infocontainer no-controls'>
        <div id="infobar-tools">
          <a href="./"><div id="infobar-header" title="Air Tracker"></div></a>
          <div id="infobar-back-arrow-container" title="{{infobar.infobarBackArrowContainer.title}}" data-lang-key="infobar.infobarBackArrowContainer.title">
            <div id="back-arrow"></div>
            <span id="back-arrow-text" data-lang-key="infobar.backArrowText.content">{{infobar.backArrowText.content}}</span>
          </div>
          <span class='more-info more-info-grapher' title="{{infobar.moreInfo.title}}" data-info="grapher" data-lang-key="infobar.moreInfo.title"></span>
          <div id="infobar-tools-wrapper">
            <div id="heatmap">
              <p class="description" data-lang-key="infobar.heatmap.description.content">{{infobar.heatmap.description.content}}</p>
              <div class="left-align-content add-top-margin">
                <div class="custom-radio custom-radio-left">
                  <input type="radio" name="date-picker-selector" value="gui" id="gui-collection-radio" checked>
                  <label for="gui-collection-radio" data-lang-key="infobar.heatmap.guiCollectionRadioLabel.content" class="noselect">{{infobar.heatmap.guiCollectionRadioLabel.content}}</label>
                </div>
                <div class="custom-radio custom-radio-right">
                  <input type="radio" name="date-picker-selector" value="manual" id="manual-collection-radio">
                  <label for="manual-collection-radio" data-lang-key="infobar.heatmap.manualCollectionRadioLabel.content" class="noselect">{{infobar.heatmap.manualCollectionRadioLabel.content}}</label>
                </div>
              </div>
              <div id="heatmap-manual-date-entry-container" data-radio="manual-collection-radio">
                <p class="description" data-lang-key="infobar.heatmap.manualCollectionDescription.content">{{infobar.heatmap.manualCollectionDescription.content}}</p>
                <p class="description2" data-lang-key="infobar.heatmap.manualCollectionDescription.content2">{{infobar.heatmap.manualCollectionDescription.content2}}</p>
                <div class="heatmap-dates-wrapper">
                  <p class="description">(e.g. 2022-07-02 15:00, 2022-07-02 16:00)</p>
                  <textarea id="heatmap-dates" rows="10" cols="34"></textarea>
                </div>
              </div>
              <div id="heatmap-gui-datepicker-entry-container" data-radio="gui-collection-radio">
                <p class="description" data-lang-key="infobar.heatmap.guiCollectionDescription.content">{{infobar.heatmap.guiCollectionDescription.content}}</p>
                <table id="heatmap-date-picker">
                  <tr>
                    <td width="20">
                      <div id="datetimepickerStartHeading" data-lang-key="infobar.heatmap.datetimepickerStartHeading.content">{{infobar.heatmap.datetimepickerStartHeading.content}}</div>
                    </td>
                    <td>
                      <div class="input-block">
                        <input id="datetimepicker-start" type="text" placeholder="{{infobar.heatmap.datetimepickerStart.placeholder}}" autocomplete="off" data-lang-key="infobar.heatmap.datetimepickerStart.placeholder">
                        <i class="fa fa-calendar-alt"></i>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td id="datetimepickerIntervalHeading" data-lang-key="infobar.heatmap.datetimepickerIntervalHeading.content">
                      {{infobar.heatmap.datetimepickerIntervalHeading.content}}
                    </td>
                    <td>
                      <input type="number" id="interval" name="interval" min="1" value="1">
                      <select name="frequency" id="frequency">
                        <option value="RRule.HOURLY">Hour(s)</option>
                        <option value="RRule.DAILY">Day(s)</option>
                        <option value="RRule.WEEKLY">Week(s)</option>
                        <option value="RRule.MONTHLY">Month(s)</option>
                      </select>
                    </td>
                  </tr>
                  <tr id="hour-row">
                    <td colspan="2" id="datetimepickerHourSelectorHeading">
                      <span data-lang-key="infobar.heatmap.datetimepickerHourSelectorHeading.content">{{infobar.heatmap.datetimepickerHourSelectorHeading.content}}</span>: (<a href="javascript:void(0)" class="select-all" data-lang-key="infobar.heatmap.selectAllOptions.content">{{infobar.heatmap.selectAllOptions.content}}</a>)
                      <div id="hour" class="checkbox-group">
                        <label><input name="byhour" type="checkbox" value="0" checked>12 AM</label>
                        <label><input name="byhour" type="checkbox" value="1" checked>01 AM</label>
                        <label><input name="byhour" type="checkbox" value="2" checked>02 AM</label>
                        <label><input name="byhour" type="checkbox" value="3" checked>03 AM</label>
                        <label><input name="byhour" type="checkbox" value="4" checked>04 AM</label>
                        <label><input name="byhour" type="checkbox" value="5" checked>05 AM</label>
                        <label><input name="byhour" type="checkbox" value="6" checked>06 AM</label>
                        <label><input name="byhour" type="checkbox" value="7" checked>07 AM</label>
                        <label><input name="byhour" type="checkbox" value="8" checked>08 AM</label>
                        <label><input name="byhour" type="checkbox" value="9" checked>09 AM</label>
                        <label><input name="byhour" type="checkbox" value="10" checked>10 AM</label>
                        <label><input name="byhour" type="checkbox" value="11" checked>11 AM</label>
                        <label><input name="byhour" type="checkbox" value="12" checked>12 PM</label>
                        <label><input name="byhour" type="checkbox" value="13" checked>01 PM</label>
                        <label><input name="byhour" type="checkbox" value="14" checked>02 PM</label>
                        <label><input name="byhour" type="checkbox" value="15" checked>03 PM</label>
                        <label><input name="byhour" type="checkbox" value="16" checked>04 PM</label>
                        <label><input name="byhour" type="checkbox" value="17" checked>05 PM</label>
                        <label><input name="byhour" type="checkbox" value="18" checked>06 PM</label>
                        <label><input name="byhour" type="checkbox" value="19" checked>07 PM</label>
                        <label><input name="byhour" type="checkbox" value="20" checked>08 PM</label>
                        <label><input name="byhour" type="checkbox" value="21" checked>09 PM</label>
                        <label><input name="byhour" type="checkbox" value="22" checked>10 PM</label>
                        <label><input name="byhour" type="checkbox" value="23" checked>11 PM</label>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="2" id="datetimepickerDayOfWeekSelectorHeading">
                      <span data-lang-key="infobar.heatmap.datetimepickerDayOfWeekSelectorHeading.content">{{infobar.heatmap.datetimepickerDayOfWeekSelectorHeading.content}}</span>: (<a href="javascript:void(0)" class="select-all" data-lang-key="infobar.heatmap.selectAllOptions.content">{{infobar.heatmap.selectAllOptions.content}}</a>)
                      <div id="dayofweek" class="checkbox-group">
                      <label><input type="checkbox" name="byweekday" value="RRule.MO" checked>Mon</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.TU" checked>Tue</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.WE" checked>Wed</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.TH" checked>Thu</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.FR" checked>Fri</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.SA" checked>Sat</label>
                      <label><input type="checkbox" name="byweekday" value="RRule.SU" checked>Sun</label>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td colspan="2" id="datetimepickerMonthSelectorHeading">
                      <span data-lang-key="infobar.heatmap.datetimepickerMonthSelectorHeading.content">{{infobar.heatmap.datetimepickerMonthSelectorHeading.content}}</span>: (<a href="javascript:void(0)" class="select-all" data-lang-key="infobar.heatmap.selectAllOptions.content">{{infobar.heatmap.selectAllOptions.content}}</a>)
                      <div id="month" class="checkbox-group">
                        <label><input name="bymonth" type="checkbox" value="1" checked>Jan</label>
                        <label><input name="bymonth" type="checkbox" value="2" checked>Feb</label>
                        <label><input name="bymonth" type="checkbox" value="3" checked>Mar</label>
                        <label><input name="bymonth" type="checkbox" value="4" checked>Apr</label>
                        <label><input name="bymonth" type="checkbox" value="5" checked>May</label>
                        <label><input name="bymonth" type="checkbox" value="6" checked>Jun</label>
                        <label><input name="bymonth" type="checkbox" value="7" checked>Jul</label>
                        <label><input name="bymonth" type="checkbox" value="8" checked>Aug</label>
                        <label><input name="bymonth" type="checkbox" value="9" checked>Sep</label>
                        <label><input name="bymonth" type="checkbox" value="10" checked>Oct</label>
                        <label><input name="bymonth" type="checkbox" value="11" checked>Nov</label>
                        <label><input name="bymonth" type="checkbox" value="12" checked>Dec</label>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div data-lang-key="infobar.heatmap.datetimepickerEndHeading.content">{{infobar.heatmap.datetimepickerEndHeading.content}}</div>
                    </td>
                    <td>
                      <div class="input-block">
                        <input id="datetimepicker-end" type="text" placeholder="{{infobar.heatmap.datetimepickerEnd.placeholder}}" autocomplete="off" data-lang-key="infobar.heatmap.datetimepickerEnd.placeholder">
                        <i class="fa fa-calendar-alt"></i>
                      </div>
                    </td>
                  </tr>
                </table>
                <input type="hidden" id="rrule-str">
                <p id="result"></p>
              </div>
            </div>
            <div id="timeseries">
              <div id="grapher_container" class="noselect">
                <div class="alert" data-lang-key="timeseries.alert.content">
                  {{timeseries.alert.content}}
                </div>
                <table id="grapher" border="0" cellpadding="0" cellspacing="0">
                  <tr>
                      <td>
                        <div id="date_axis" class="date_axis"></div>
                      </td>
                      <td>
                        <div id="zoomGrapherIn" class="zoomGrapherBtn ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only" data-lang-key="timeseries.zoomGrapherIn.title" title="{{timeseries.zoomGrapherIn.title}}">
                          <span class="ui-button-text"></span><span class="ui-button-icon-secondary ui-icon ui-icon-custom-plus-white"></span>
                        </div>
                        <div id="zoomGrapherOut" class="zoomGrapherBtn ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only" data-lang-key="timeseries.zoomGrapherOut.title" title="{{timeseries.zoomGrapherOut.title}}">
                          <span class="ui-button-text"></span><span class="ui-button-icon-secondary ui-icon ui-icon-custom-minus-white"></span>
                        </div>
                      </td>
                  </tr>
                  <tr>
                    <td>
                      <div id="plot_container" class="plot_container"></div>
                      </td>
                      <td>
                        <div id="y_axis" class="y_axis">
                          <div id="y_axis_label" class="rotate_90 y_axis_label">(ug/m<sup>3</sup>)</div>
                        </div>
                      </td>
                  </tr>
                  <tr><td id="hover_sample_value_and_time"></td></tr>
                </table>
                <div id='grapher_legend'>
                  <table id="graph_legend_content"></table>
                </div>
              </div>
            </div>
            <br>
            <div id="get-heatmap-button-container"><div id='get-heatmap'><span class="button-text" data-lang-key="timeseries.generateHeatmapBtn.content">{{timeseries.generateHeatmapBtn.content}}</span></div></div>
          </div>
        </div>
        <div id="infobar-content">
          <a href="./"><div id="infobar-header" title="Air Tracker"></div></a>
          <div id="infobar-location-header"></div>
          <div id="infobar-initial" class="initial">
            <p data-lang-key="infobarContent.initial.p1.content">{{infobarContent.initial.p1.content}}</p>
            <p data-lang-key="infobarContent.initial.p2.content">{{infobarContent.initial.p2.content}}</p>
            <p data-lang-key="infobarContent.initial.p3.content">{{infobarContent.initial.p3.content}}</p>
            <ul>
              <li data-lang-key="infobarContent.initial.li1.content">{{infobarContent.initial.li1.content}}</li>
              <br>
              <li data-lang-key="infobarContent.initial.li2.content">{{infobarContent.initial.li2.content}}</li>
              <br>
              <li data-lang-key="infobarContent.initial.li3.content">{{infobarContent.initial.li3.content}}</li>
            </ul>
          </div>
          <div id="infobar-component-container">
            <div id="infobar-plume-section" class="infobar-component">
              <div class="infobar-component-header"><span data-lang-key="infobarContent.components.backtrace.content">{{infobarContent.components.backtrace.content}}</span>: <span class='more-info' title="{{infobar.moreInfo.title}}" data-info="side-panel-backtrace" data-lang-key="infobar.moreInfo.title"></span><div class="plume-expand-icon" title="{{infobar.moreDetails.title}}" data-lang-key="infobar.moreDetails.title"></div></div>
              <div id="infobar-plume">
                <div class="plume-expand"></div>
                <div class="infobar-text"></div>
                <div class="infobar-data"></div>
                <div class="infobar-unit"></div>
                <div class="infobar-time"></div>
              </div>
              <div class="heatmap-modal-button-container"><button id="heatmap-btn" data-lang-key="infobarContent.components.heatmapBtn.content">{{infobarContent.components.heatmapBtn.content}}</button></div>
            </div>
            <div id="infobar-pollution-section" class="infobar-component">
              <div class="infobar-component-header"><span class='pollutant-name'></span>: <span class='more-info' title="{{infobar.moreInfo.title}}" data-lang-key="infobar.moreInfo.title" data-info="side-panel-data"></span><span class='chart-btn' title="{{infobarContent.components.timeseriesBtn.title}}" data-lang-key="infobarContent.components.timeseriesBtn.title"></span></div>
              <div id="infobar-pollution" class="infobar-component-value">
                <div class="infobar-text"><i data-lang-key="infobarContent.components.pollutionHeading.content">{{infobarContent.components.pollutionHeading.content}}</i></div>
                <div class="infobar-data"></div>
                <div class="infobar-unit"></div>
                <div class="infobar-time"></div>
              </div>
            </div>
            <div id="infobar-wind-section" class="infobar-component">
              <div class="infobar-component-header" data-lang-key="infobarContent.components.windHeading.content">{{infobarContent.components.windHeading.content}}<span class='more-info' title="{{infobar.moreInfo.title}}" data-info="side-panel-data" data-lang-key="infobar.moreInfo.title"></span></div>
              <div id="infobar-wind" class="infobar-component-value">
                <div class="infobar-text"><i data-lang-key="infobarContent.components.windDescription.content">{{infobarContent.components.windDescription.content}}</i></div>
                <div class="infobar-data-intro" data-lang-key="infobarContent.components.windHeadingDirection.content">{{infobarContent.components.windHeadingDirection.content}}</div>
                <div class="infobar-data"></div>
                <div class="infobar-unit"></div>
                <div class="infobar-time"></div>
              </div>
            </div>
          </div>
          <div id="infobar-close-handle-container">
            <div id="infobar-close-handle"></div>
          </div>
          <div id="infobar-close-toggle-container" title="{{infobarContent.components.toggleInfo.title}}" data-lang-key="infobarContent.components.toggleInfo.title">
            <div class="infobar-close-toggle-icon"></div>
          </div>
          <div class="side-controls-container">
            <div class="side-controls-container-column">
              <button id="city-picker" class="control-button" data-lang-key="infobarContent.components.sideControls.cityPicker.title">{{infobarContent.components.sideControls.cityPicker.title}}</button>
              <button id="share-picker" class="control-button" data-lang-key="infobarContent.components.sideControls.share.title">{{infobarContent.components.sideControls.share.title}}</button>
              <button id="help-tour" class="control-button" data-lang-key="infobarContent.components.sideControls.helpTour.title">{{infobarContent.components.sideControls.helpTour.title}}</button>
              <button id="reach-out" class="control-button" data-lang-key="infobarContent.components.sideControls.reachOut.title">{{infobarContent.components.sideControls.reachOut.title}}</button>
              <button id="methodology" class="control-button" data-lang-key="infobarContent.components.sideControls.methodology.title">{{infobarContent.components.sideControls.methodology.title}}</button>
            </div>
            <div class="side-controls-container-column">
              <div class="searchBoxContainer">
                <input class="searchBox" placeholder="{{infobarContent.components.searchControls.searchBox.placeholder}}" autocomplete="off" data-lang-key="infobarContent.components.searchControls.searchBox.placeholder">
                <span class="searchBoxIcon" title="{{infobarContent.components.searchControls.toggle.title}}" data-lang-key="infobarContent.components.searchControls.toggle.title"></span>
                <span class="searchBoxClearIcon" title="{{infobarContent.components.searchControls.clear.title}}" data-lang-key="infobarContent.components.searchControls.clear.title"></span>
              </div>
              <button id="calendar-year" class="control-button disabled" data-lang-key="infobarContent.components.sideControls.calendar.title">{{infobarContent.components.sideControls.calendar.title}}</button>
              <button id="add-placemarker" class="control-button disabled" data-lang-key="infobarContent.components.placeMarkers.addPlaceMarker.title">{{infobarContent.components.placeMarkers.addPlaceMarker.title}}</button>
              <button id="remove-placemarkers" class="control-button disabled" data-lang-key="infobarContent.components.placeMarkers.removePlaceMarker.title">{{infobarContent.components.placeMarkers.removePlaceMarker.title}}</button>
            </div>
          </div>
        </div>
      </div>
      <table id="legend-container">
        <tr>
          <td class="vertical-align-top">
            <div id="language-picker" class="language-picker no-legend" title="{{languagePicker.title}}" data-lang-key="languagePicker.title"></div>
          </td>
          <td>
            <div class="custom-legend noselect no-controls" id="legend">
              <h3 class="legend-title"><span data-lang-key="legend.heading.content">{{legend.heading.content}}</span></h3>
              <div class="legend-scale">
                <table id="legend-table">
                  <tr>
                    <td data-lang-key="legend.date.content">{{legend.date.content}}</td>
                    <td colspan="2" id="current-date-legend"></td>
                  </tr>
                  <tr id="backtrace-legend-row" class="legend-row force-hidden">
                    <td class="entry-title" data-lang-key="legend.backtrace.content">{{legend.backtrace.content}}<span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-backtrace" data-lang-key="infobar.moreInfo.title"></span></td>
                    <td colspan="2" class="backtrace-color-map"></td>
                  </tr>
                  <tr id="backtrace-details-legend-row" class="force-hidden">
                    <td class="entry-title"></td>
                    <td class="legend-label" data-lang-key="legend.backtraceDetails.content">{{legend.backtraceDetails.content}}</td>
                    <td class="legend-label backtrace-text2" data-lang-key="legend.backtraceDetails.content2">{{legend.backtraceDetails.content2}}</td>
                  </tr>
                  <tr id="air_now-legend-row" class="legend-row">
                    <td class="entry-title two-rows">
                      <span data-lang-key="legend.referenceMonitor.content">{{legend.referenceMonitor.content}}</span> <span class="pollutant-name"></span>:
                      <br><span class="legend-row-units">(ug/m<sup>3</sup>)</span><span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-air_now" data-lang-key="infobar.moreInfo.title"></span>
                    </td>
                    <td colspan="2">
                      <table>
                        <tr>
                          <td class="color-td PM-color-1"></td>
                          <td class="color-td PM-color-2"></td>
                          <td class="color-td PM-color-3"></td>
                          <td class="color-td PM-color-4"></td>
                          <td class="color-td PM-color-5"></td>
                        </tr>
                        <tr class='pollution-scale-vals'>
                          <td class="legend-label"></td>
                          <td class="legend-label"></td>
                          <td class="legend-label"></td>
                          <td class="legend-label"></td>
                          <td class="legend-label"></td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                  <tbody id="additional-sensors"></tbody>
                  <tr id="smell_report-legend-row" class="legend-row">
                    <td class="entry-title" data-lang-key="legend.smellMonitor.content">
                      {{legend.smellMonitor.content}}
                    </td>
                    <td colspan="2">
                      <table>
                        <tr>
                          <td class="color-td smell-color-1"></td>
                          <td class="color-td smell-color-2"></td>
                          <td class="color-td smell-color-3"></td>
                          <td class="color-td smell-color-4"></td>
                          <td class="color-td smell-color-5"></td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                  <tr id="trax-legend-row" class="legend-row">
                    <td class="entry-title two-rows">
                      TRAX PM<sub>2.5</sub>:
                      <br><span class="legend-row-units">(ug/m<sup>3</sup>)</span><span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-trax" data-lang-key="infobar.moreInfo.title"></span>
                    </td>
                    <td colspan="2">
                      <span class="trax-color-1 trax-span opacity-25"></span>
                      <span class="trax-color-1 trax-span opacity-50"></span>
                      <span class="trax-color-1 trax-span opacity-75"></span>
                      <span class="trax-color-1 trax-span"></span>
                      <span class="trax-color-1 trax-span"></span>
                      <span class="trax-color-2 trax-span"></span>
                      <span class="trax-color-2 trax-span"></span>
                      <span class="trax-color-3 trax-span"></span>
                      <span class="trax-color-3 trax-span"></span>
                      <span class="trax-color-4 trax-span"></span>
                      <span class="trax-color-4 trax-span"></span>
                      <span class="trax-color-5 trax-span"></span>
                      <span class="trax-color-5 trax-span"></span>
                      <span class="trax-color-5 trax-span opacity-75"></span>
                      <span class="trax-color-5 trax-span opacity-50"></span>
                      <span class="trax-color-5 trax-span opacity-25"></span>
                    </td>
                    <td>
                      <label class="switch" title="{{legend.toggle.title}}" data-lang-key="legend.toggle.title">
                        <input type="checkbox" id="toggle-trax" data-marker-type="trax">
                        <span class="slider round">
                          <span class="input-state-text"></span>
                        </span>
                      </label>
                    </td>
                  </tr>
                  <tr id="wind-legend-row">
                    <td class="entry-title">
                      <span data-lang-key="legend.wind.content">{{legend.wind.content}}</span>
                      <span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-wind" data-lang-key="infobar.moreInfo.title"></span>
                    </td>
                    <td colspan="1" class="wind-arrow-td wind-arrow"></td>
                    <td colspan="2">
                      <div style="margin-left: -50px">
                        <input class="radio-button" type="radio" id="wind_unit_mph" name="wind_unit" value="mph" checked="checked">
                        <label class="radio-button" for="wind_unit_mph">mph</label>
                        <input class="radio-button" type="radio" id="wind_unit_km" name="wind_unit" value="kph">
                        <label class="radio-button" for="wind_unit_km">km/h</label>
                      </div>
                    </td>                    
                  </tr>
                  <tbody id="overlays">
                    <tr id="facilities-legend-row">
                      <td class="entry-title"><span data-lang-key="legend.facilityOverlays.content">{{legend.facilityOverlays.content}}</span> <br> <span data-lang-key="legend.facilityOverlays.content2">{{legend.facilityOverlays.content2}}</span>: <span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-facilities" data-lang-key="infobar.moreInfo.title"></span></td>
                      <td colspan="2" class="facilities-td facilities"></td>
                      <td>
                        <label class="switch" title="{{legend.toggle.title}}" data-lang-key="legend.toggle.title">
                          <input type="checkbox" id="toggle-facilities" data-marker-type="facilities">
                          <span class="slider round">
                            <span class="input-state-text"></span>
                          </span>
                        </label>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <table id="legend-extras">
                  <tr>
                    <td>
                      <span data-lang-key="legend.aq_std.content"> {{legend.aq_std.content}}</span>
                      <span class='more-info more-info-legend' title="{{infobar.moreInfo.title}}" data-info="legend-aq_std" data-lang-key="infobar.moreInfo.title"></span>
                    </td>
                    <td id="aq-std-picker"></td>
                  </tr>
                  <tr>
                    <td data-lang-key="legend.pollution_type.content">
                      {{legend.pollution_type.content}}
                    </td>
                    <td>
                      <select name="pollution-type-picker-select" id="pollution-type-picker-select">
                        <option value="PM25" selected>PM 2.5</option>
                        <option value="PM10">PM 10</option>
                      </select>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </td>
        </tr>
      </table>
      <div id="footprint-first-click-dialog" title="{{explanations.dialogTitle.title}}" data-lang-key="explanations.dialogTitle.title">
        <div id="explanation-content-container">
          <div id="explanation-1" class="explanation-content">
            <p data-lang-key="explanations.explanation1.p1.content">{{{explanations.explanation1.p1.content}}}</p>
            <p data-lang-key="explanations.explanation1.p2.content">{{{explanations.explanation1.p2.content}}}</p>
            <p data-lang-key="explanations.explanation1.p3.content">{{{explanations.explanation1.p3.content}}}</p><br><br>
          </div>
          <div id="explanation-2" class="explanation-content">
            <h4 data-lang-key="explanations.explanation2.heading.content">{{{explanations.explanation2.heading.content}}}</h4>
            <span data-lang-key="explanations.explanation2.description.content">{{{explanations.explanation2.description.content}}}</span>:
            <br><br>
            <div><img src="./assets/img/edf-wind-pt1a.jpg"></div>
            <br>
            <div><img src="./assets/img/edf-wind-pt1b.jpg"></div>
            <br>
            <div><img src="./assets/img/edf-wind-pt1c.jpg"></div>
            <br>
            <span data-lang-key="explanations.explanation2.description2.content">{{{explanations.explanation2.description2.content}}}</span>
            <br><br>
            <span data-lang-key="explanations.explanation2.description3.content">{{{explanations.explanation2.description3.content}}}</span>
            <br><br>
            <div><img src="./assets/img/edf-wind-pt2a.jpg"></div>
            <br>
            <div><img src="./assets/img/edf-wind-pt2b.jpg"></div>
            <br>
            <div><img src="./assets/img/edf-wind-pt2c.jpg"></div>
            <br>
          </div>
        </div>
        <div id="explanationstep-container" data-max-steps="2" data-current-step="1">
          <a id="explanationstep-back" class="explanation-step-button disabled" data-direction="-1" href="javascript:void(0)">&xlarr; <span data-lang-key="explanations.back.content">{{explanations.back.content}}</span></a> | <a id="explanationstep-forward" class="explanation-step-button" data-direction="1" href="javascript:void(0)"><span data-lang-key="explanations.next.content">{{explanations.next.content}}</span> &xrarr;</a>
        </div>
        <br><br>
        <div id="checkbox-container">
          <input type="checkbox" id="dont-show-again" name="dont-show-again" value="1">
          <label for="dont-show-again" data-lang-key="explanations.showAgainToggle.content">{{explanations.showAgainToggle.content}}</label>
        </div>
      </div>
      <div id="calendar-dialog" title="{{calendar.titleBar.title}}" data-role="none" data-lang-key="calendar.titleBar.title">
        <p data-lang-key="calendar.p1.content">{{calendar.p1.content}}</p>
        <input type="hidden" autofocus="autofocus" />
        <select id="calendar" data-role="none"></select>
      </div>
      <div class="shareViewModal">
        <div id="share-link-container-main">
          <p class="heading" data-lang-key="shareModal.shareUrl.content">{{shareModal.shareUrl.content}}</p>
          <div class="share-link-container-content">
            <div class="shareurl always-selectable"></div>
            <span class="copy-text-button shareurl-copy-text-button" title="{{shareModal.shareBtn.title}}" data-lang-key="shareModal.shareBtn.title"></span>
          </div>
        </div>
        <div id="embed-link-container-main">
          <br>
          <p class="heading" data-lang-key="shareModal.screenshotHeading.content">{{shareModal.screenshotHeading.content}}</p>
          <div id='get-screenshot-container'>
            <div id='get-screenshot' data-lang-key="shareModal.captureBtn.content">{{shareModal.captureBtn.content}}</div>
            <div id='get-screenshot-description' data-lang-key="shareModal.description.content">{{shareModal.description.content}}<br><span data-lang-key="shareModal.description.content2">{{shareModal.description.content2}}</span></div>
          </div>
        </div>
        <span class="close-modal" title="{{infobar.close.title}}" data-lang-key="infobar.close.title"></span>
      </div>
      <div class="reachOutModal">
        <div>
          <p class="heading" data-lang-key="reachOutModal.heading.content">{{reachOutModal.heading.content}}</p>
          <div><span data-lang-key="reachOutModal.description.content">{{reachOutModal.description.content}}</span> <a href="mailto:AirTracker@edf.org">AirTracker@edf.org</a></div>
        </div>
        <span class="close-modal" title="{{infobar.close.title}}" data-lang-key="infobar.close.title"></span>
      </div>
      <div class="methodologyModal">
        <div>
          <p class="heading" data-lang-key="methodologyModal.heading.content">{{methodologyModal.heading.content}}</p>
          <div><a href="https://storage.googleapis.com/air-tracker-edf-website/prod/assets/data/20220524_Air_Tracker_Methodology.pdf" target="_blank" data-lang-key="methodologyModal.description.content">{{methodologyModal.description.content}}</a> <span data-lang-key="methodologyModal.description.content2">{{methodologyModal.description.content2}}</span></div>
        </div>
        <span class="close-modal" title="{{infobar.close.title}}" data-lang-key="infobar.close.title"></span>
      </div>
      <div class="backtraceSettingsModal">
        <div>
          <p class="heading" data-lang-key="backtraceSettingsModal.heading.content">{{backtraceSettingsModal.heading.content}}</p>
          <table>
            <tr>
              <td data-lang-key="backtraceSettingsModal.td1.content">{{backtraceSettingsModal.td1.content}}</td>
              <td>
                <label class="switch" title="{{backtraceSettingsModal.td1.title}}" data-lang-key="backtraceSettingsModal.td1.title">
                  <input type="checkbox" id="toggle-backtrace-likelihood">
                  <span class="slider round">
                    <span class="input-state-text"></span>
                  </span>
                </label>
              </td>
            </tr>
            <tr>
              <td data-lang-key="backtraceSettingsModal.td2.content">{{backtraceSettingsModal.td2.content}}</td>
              <td>
                <label class="switch" title="{{backtraceSettingsModal.td2.title}}" data-lang-key="backtraceSettingsModal.td2.title">
                  <input type="checkbox" id="toggle-uncertainty-details">
                  <span class="slider round">
                    <span class="input-state-text"></span>
                  </span>
                </label>
              </td>
            </tr>
          </table>
        </div>
        <span class="close-modal" title="{{infobar.close.title}}" data-lang-key="infobar.close.title"></span>
      </div>
      <div class="disclaimerModal">
          <h3>{{disclaimerModal.h3.content}}</h3>
          <p data-lang-key="disclaimerModal.p1.content">
            {{{disclaimerModal.p1.content}}}
          </p>
      </div>
      <div class="tosModal">
        <div class="content">
          <h3 data-lang-key="tosModal.header.content">{{tosModal.header.content}}</h3>
          <p data-lang-key="tosModal.p1.content">
            {{tosModal.p1.content}}
          </p>
          <p data-lang-key="tosModal.p2.content">
            {{tosModal.p2.content}}
          </p>
          <p data-lang-key="tosModal.p3.content">
            {{tosModal.p3.content}}
          </p>
          <p>
            <span data-lang-key="tosModal.p4.content">{{tosModal.p4.content}}</span>
            <ul>
              <li data-lang-key="tosModal.li1.content">{{tosModal.li1.content}}</li>
              <li><span data-lang-key="tosModal.li2.content">{{tosModal.li2.content}}</span>: [<a href="https://globalcleanair.org/air-tracker" target="_blank">https://globalcleanair.org/air-tracker</a>]</li>
              <li><span data-lang-key="tosModal.li3.content">{{tosModal.li3.content}}</span>*</li>
              <li><span data-lang-key="tosModal.li4.content">{{tosModal.li4.content}}</span>*</li>
              <li><span data-lang-key="tosModal.li5.content">{{tosModal.li5.content}}</span>*</li>
            *<span data-lang-key="tosModal.note.content">{{tosModal.note.content}}</span></li>
            <br>
            <span data-lang-key="tosModal.separator.content">{{tosModal.separator.content}}</span>:
              <li data-lang-key="tosModal.li6.content">{{tosModal.li6.content}}</li>
              <li data-lang-key="tosModal.li7.content">{{tosModal.li7.content}}</li>
              <li data-lang-key="tosModal.li8.content">{{tosModal.li8.content}}</li>
              <li data-lang-key="tosModal.li9.content">{{tosModal.li9.content}}</li>
              <li data-lang-key="tosModal.li10.content">{{tosModal.li10.content}}</li>
              <li data-lang-key="tosModal.li11.content">{{tosModal.li11.content}}</li>
            </ul>
          </p>
          <p data-lang-key="tosModal.p5.content">
            {{tosModal.p5.content}}
          </p>
          <p data-lang-key="tosModal.p6.content">
            {{tosModal.p6.content}}
          </p>
          <p>
            <span data-lang-key="tosModal.p7.content">{{tosModal.p7.content}}</span>:
            <ul>
              <li><a href="https://www.epa.gov/toxics-release-inventory-tri-program" target="_blank">Toxic Releases Inventory (TRI)</a></li>
              <li><a href="https://www.epa.gov/air-emissions-inventories/national-emissions-inventory-nei" target="_blank">National Emissions Inventory (NEI)</a></li>
              <li><a href="https://www.epa.gov/frs" target="_blank">Facility Registry Service (FRS)</a></li>
              <li><a href="https://www.airnow.gov/" target="_blank">AirNow</a></li>
              <li><a href="https://air-matters.com/" target="_blank">AirMatters</a></li>
              <li><a href="https://map.purpleair.com/" target="_blank">PurpleAir</a></li>
              <li><a href="https://openmap.clarity.io/" target="_blank">Clarity</a></li>
              <li><a href="https://mesowest.utah.edu/" target="_blank">MesoWest</a></li>
              <li><a href="https://tnris.org/" target="_blank">Texas Natural Resources Information System (TNRIS)</a></li>
            </ul>
          </p>
          <p data-lang-key="tosModal.p8.content">
            {{tosModal.p8.content}}
          </p>
          <p data-lang-key="tosModal.p9.content">
            {{tosModal.p9.content}}
          </p>
          <p data-lang-key="tosModal.p10.content">
            {{tosModal.p10.content}}
          </p>
          <p>
            <span data-lang-key="tosModal.p11.content">{{tosModal.p11.content}}</span> <a href="mailto:AirTracker@edf.org">AirTracker@edf.org</a>
          </p>
        </div>
        <div class="footer">
          <input id="tos-agree" type="checkbox">
          <label for="tos-agree" data-lang-key="tosModal.consent.content">{{tosModal.consent.content}}</label>
        </div>
      </div>
      <div id="city-picker-controls">
        <select id="city-selector"></select>
      </div>
      <span class="button-tooltip">
        <p></p>
      </span>
      <div id="mobile-content">
        <input class='mobile-menu-toggle' type="checkbox" id="active">
        <label class='mobile-menu-toggle menu-btn' for="active"><span></span></label>
        <label class='mobile-menu-toggle close' for="active"></label>
        <div id='mobile-menu'>
          <div class="searchModal">
              <div class="searchBoxContainer">
                <p class="heading" data-lang-key="infobarContent.components.searchControls.heading.content">{{infobarContent.components.searchControls.heading.content}}</p>
                <input class="searchBox searchBoxMobile" placeholder="{{infobarContent.components.searchControls.searchBox.placeholder}}" autocomplete="off" data-lang-key="infobarContent.components.searchControls.searchBox.placeholder">
                <span class="searchBoxClearIcon" title="{{infobarContent.components.searchControls.clear.title}}" data-lang-key="infobarContent.components.searchControls.clear.title"></span>
              </div>
              <span class="close-modal" title="{{infobar.close.title}}" data-lang-key="infobar.close.title"></span>
            </div>
          <div class="wrapper">
            <ul>
              <li id="city-picker-mobile"><span class="mobile-city-picker-icon"></span><a href="#" data-lang-key="infobarContent.components.sideControls.cityPicker.content">{{infobarContent.components.sideControls.cityPicker.content}}</a></li>
              <li id="share-picker-mobile"><span class="mobile-share-icon"></span><a href="#" data-lang-key="infobarContent.components.sideControls.share.content">{{infobarContent.components.sideControls.share.content}}</a></li>
              <!-- <li id="help-tour-mobile"><span class="mobile-tour-icon"></span><a href="#">Tour</a></li> -->
              <li id="reach-out-mobile"><span class="mobile-reach-out-icon"></span><a href="#" data-lang-key="infobarContent.components.sideControls.reachOut.content">{{infobarContent.components.sideControls.reachOut.content}}</a></li>
              <li id="methodology-mobile"><span class="mobile-methodology-icon"></span><a href="#" data-lang-key="infobarContent.components.sideControls.methodology.content">{{infobarContent.components.sideControls.methodology.content}}</a></li>
              <li id="search-mobile">
                <span class="searchBoxIconMobile" title="{{infobarContent.components.searchControls.toggle.content}}" data-lang-key="infobarContent.components.searchControls.toggle.content"></span>
                <a href="#" data-lang-key="infobarContent.components.searchControls.heading.content">{{infobarContent.components.searchControls.heading.content}}</a>
                <!-- <div class="searchBoxContainer">
                  <input class="searchBox searchBoxMobile" placeholder="{{infobarContent.components.searchControls.searchBox.placeholder}}" autocomplete="off">
                  <span class="searchBoxClearIcon" title="{{infobarContent.components.searchControls.clear.title}}"></span>
                </div> -->
              </li>
              <li id="language-mobile"><span class="mobile-language-icon"></span><a href="#" data-lang-key="languagePicker.content">{{languagePicker.content}}</a><div id="language-picker-select-mobile-container"></div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </script>
  </head>
  <body class="materialUI">
    <div id="body-content"></div>
    <div id="map" class="no-controls"></div>
  </body>
</html>
