/*
 Bootstrap-fullscreen-select v1.5.1 (http://craftpip.github.io/bootstrap-fullscreen-select/)
 Author: boniface pereira
 Website: www.craftpip.com
 Contact: hey@craftpip.com

 Copyright 2013-2014 bootstrap-select
 Licensed under MIT (https://github.com/craftpip/bootstrap-fullscreen-select/blob/master/LICENSE)
*/
if("undefined"===typeof jQuery)throw Error("Mobileselect' requires jQuery");
(function(b){b.fn.mobileSelect=function(a){var c=b(this);if(!c.length)return"no elements to process";a||(a={});if("string"===typeof a){if("destroy"===a&&c.each(function(d,e){var f=b(e).attr("data-msid");b.mobileSelect.elements[f].destroy();delete b.mobileSelect.elements[f]}),"sync"!==a&&"refresh"!==a||c.each(function(d,e){var f=b(e).attr("data-msid");b.mobileSelect.elements[f].refresh()}),"hide"===a&&c.each(function(d,e){var f=b(e).attr("data-msid");b.mobileSelect.elements[f].hide()}),"show"===a&&
c.each(function(d,e){var f=b(e).attr("data-msid");b.mobileSelect.elements[f].show()}),"exists"===a){var g=!1;b.each(b.mobileSelect.elements,function(d,e){e.$e[0]===c[0]&&(g=!0)});return g}}else b.mobileSelect.defaults&&b.extend(b.fn.mobileSelect.defaults,b.mobileSelect.defaults),a=b.extend({},b.fn.mobileSelect.defaults,a),c.each(function(d,e){var f=b(e);if("SELECT"!==f[0].tagName)return console.warn("Sorry, cannot initialized a "+f[0].tagName+" element"),!0;if(void 0!==f.attr("data-msid"))return console.error("This element is already Initialized"),
!0;var h=Math.floor(999999*Math.random());f.attr("data-msid",h);f=new k(e,a);b.mobileSelect.elements[h]=f})};var k=function(a,c){this.$e=b(a);b.extend(this,c);this.init()};k.prototype={init:function(){this._setUserOptions();this._extractOptions();this._buildHTML();this._bindEvents()},_buildHTML:function(){if(void 0===this.$e.attr("data-triggerOn")){void 0!==this.$e.attr("data-style")&&(this.style=this.$e.attr("data-style"));var a=this.$e.attr("disabled")||"";this.$e.before('<button type="button" class="btn '+
this.style+' btn-mobileSelect-gen" '+a+'><span class="text"></span> <span class="caret"></span></button>');this.$triggerElement=this.$e.prev();this.$e.hide()}else this.$triggerElement=b(this.$e.attr("data-triggerOn"));this.id||(this.id=(new Date).getTime());this.$c=b("<div id="+this.id+' class="mobileSelect-container"></div>').addClass(this.theme).appendTo("body");this.$c.html(b.fn.mobileSelect.defaults.template);this.$c.children("div").css({"-webkit-transition":"all "+this.animationSpeed/1E3+"s",
transition:"all "+this.animationSpeed/1E3+"s"}).css(this.padding).addClass("anim-"+this.animation);this.$c.find(".mobileSelect-title").html(this.title).end().find(".mobileSelect-savebtn").html(this.buttonSave).end().find(".mobileSelect-selectallbtn").html(this.buttonSelectAll).end().find(".mobileSelect-clearbtn").html(this.buttonClear).end().find(".mobileSelect-cancelbtn").html(this.buttonCancel).end();this.$listcontainer=this.$c.find(".list-container");this.filterable?this.filterPlaceholder&&this.$c.find(".mobileSelect-filter").attr("placeholder",
this.filterPlaceholder):this.$c.find(".mobileSelect-filter").remove();this.isMultiple?this.$listcontainer.data("multiple","true"):(this.$c.find(".mobileSelect-clearbtn").remove(),this.$c.find(".mobileSelect-selectallbtn").remove());this._appendOptionsList()},_appendOptionsList:function(){this.$listcontainer.html("");var a=this,c="";b.each(this.options,function(g,d){if(d.group&&d.group!==c){if(d.groupDisabled)var e="disabled";a.$listcontainer.append('<div><button class="btn-link" data-toggle="collapse" style="width: 100%" data-target="#group'+
d.group+'"><span class="mobileSelect-group" '+e+">"+d.group+'</span></button><div id="group'+d.group+'" class="collapse in"></div></div>');c=d.group}if(d.groupDisabled||d.disabled)e="disabled";d.group?a.$listcontainer.filter(b("#group"+d.group).append('<a href="#" class="mobileSelect-control" '+e+' data-value="'+d.value+'">'+d.text+"</a>")):a.$listcontainer.append('<a href="#" class="mobileSelect-control" '+e+' data-value="'+d.value+'">'+d.text+"</a>")});this.sync();this._updateBtnCount()},_updateBtnCount:function(){var a=
this.$triggerElement.find(".text"),c=this.$e.val();if(null===c)return a.html("Nothing selected"),!1;this.isMultiple?1===c.length?a.html(c):a.html(c.length+" items selected"):a.html(c)},_bindEvents:function(){var a=this;this.$triggerElement.on("click",function(c){c.preventDefault();a.show()});this.$c.find(".mobileSelect-selectallbtn").on("click",function(c){c.preventDefault();a.$listcontainer.find(b(".mobileSelect-control")).filter(":visible").addClass("selected");a.syncR();b(window).trigger("mobileSelectAll")});
this.$c.find(".mobileSelect-savebtn").on("click",function(c){c.preventDefault();a.syncR();a.hide();b(window).trigger("mobileSelectSave")});this.$c.find(".mobileSelect-clearbtn").on("click",function(c){c.preventDefault();a.$listcontainer.find(".selected").removeClass("selected");a.syncR();b(window).trigger("mobileSelectClear")});this.$c.find(".mobileSelect-cancelbtn").on("click",function(c){c.preventDefault();a.hide();b(window).trigger("mobileSelectCancel")});this.$c.find(".mobileSelect-filter").on("input",
function(c){a.$listcontainer.find(b(".no-result")).remove();var g=b(this).val().toLowerCase();""===g?a.$listcontainer.find(b(".mobileSelect-control")).show():(a.$listcontainer.find(b(".mobileSelect-control")).hide(),b.each(a.$listcontainer.find(b(".mobileSelect-control")),function(d,e){0<=b(e).text().toLowerCase().indexOf(g)&&b(e).show()}),0==a.$listcontainer.find(":visible").length&&a.$listcontainer.append("<div class='no-result'>No result found.</div>"))});this.$c.find(".mobileSelect-control").on("click",
function(c){c.preventDefault();c=b(this);if("disabled"==c.attr("disabled"))return!1;a.isMultiple?c.toggleClass("selected"):c.siblings().removeClass("selected").end().addClass("selected")})},_unbindEvents:function(){this.$triggerElement.unbind("click");this.$c.find(".mobileSelect-clearbtn").unbind("click");this.$c.find(".mobileSelect-cancelbtn").unbind("click");this.$c.find(".mobileSelect-control").unbind("click")},sync:function(){var a=this.$e.val();this.isMultiple||(a=[a]);this.$c.find("a").removeClass("selected");
for(var c in a)this.$c.find('a[data-value="'+a[c]+'"]').addClass("selected")},syncR:function(){var a=[];this.$c.find(".selected").each(function(){a.push(b(this).data("value"))});this.$e.val(a);this.$e.trigger("change")},hide:function(){this.$c.children("div").addClass("anim-"+this.animation);var a=this;this._updateBtnCount();setTimeout(function(){a.$c.hide();b("body").removeClass("mobileSelect-noscroll");a.onClose.apply(a.$e)},this.animationSpeed)},show:function(){this.$c.show();this.sync();b("body").addClass("mobileSelect-noscroll");
var a=this;setTimeout(function(){a.$c.children("div").removeClass(b.mobileSelect.animations.join(" "))},10);var c=this.$c.find(".mobileSelect-filter");this.filterable&&c.val()&&c.val("").trigger("input");this.onOpen.apply(this.$e)},_setUserOptions:function(){this.isMultiple=this.$e.attr("multiple")?!0:!1;void 0!==this.$e.data("title")&&(this.title=this.$e.data("title"));void 0!==this.$e.data("animation")&&(this.animation=this.$e.data("animation"));void 0!==this.$e.data("animation-speed")&&(this.animationSpeed=
this.$e.data("animation-speed"));void 0!==this.$e.data("padding")&&(this.padding=this.$e.data("padding"));void 0!==this.$e.data("btntext-save")&&(this.buttonSave=this.$e.data("btntext-save"));void 0!==this.$e.data("btntext-select-all")&&(this.buttonSelectAll=this.$e.data("btntext-select-all"));void 0!==this.$e.data("btntext-clear")&&(this.buttonClear=this.$e.data("btntext-clear"));void 0!==this.$e.data("btntext-cancel")&&(this.buttonCancel=this.$e.data("btntext-cancel"));void 0!==this.$e.data("theme")&&
(this.theme=this.$e.data("theme"));"none"===this.animation&&(this.animationSpeed=0)},_extractOptions:function(){var a=[];b.each(this.$e.find("option"),function(c,g){var d=b(g);if(d.text()){if(d.parent().is("optgroup"))var e=d.parent().attr("label"),f=d.parent().prop("disabled");else f=e=!1;a.push({value:d.val(),text:b.trim(d.text()),disabled:d.prop("disabled"),group:e,groupDisabled:f})}});this.options=a},destroy:function(){this.$e.removeAttr("data-msid");this._unbindEvents();this.$triggerElement.remove();
this.$c.remove();this.$e.show();console.log("done ")},refresh:function(){this._extractOptions();this._appendOptionsList();this._unbindEvents();this._bindEvents()}};b.mobileSelect={elements:{},animations:"anim-top anim-bottom anim-left anim-right anim-opacity anim-scale anim-zoom anim-none".split(" ")};b.fn.mobileSelect.defaults={id:"",template:'<div><div class="mobileSelect-title"></div><div class="search-wrap"><i class="fa fa-search"></i><input class="form-control mobileSelect-filter" type="search" /></div><div class="list-container"></div><div class="mobileSelect-buttons"><a href="#" class="mobileSelect-selectallbtn"></a><a href="#" class="mobileSelect-clearbtn"></a><a href="#" class="mobileSelect-savebtn"></a><a href="#" class="mobileSelect-cancelbtn"></a></div></div>',
title:"Select an option",buttonSelectAll:"Select All",buttonSave:"Save",buttonClear:"Clear",buttonCancel:"Cancel",padding:{top:"20px",left:"20px",right:"20px",bottom:"20px"},animation:"scale",animationSpeed:400,theme:"white",onOpen:function(){},onClose:function(){},style:"btn-default",filterable:!1,filterPlaceholder:"Search..."}})(jQuery);